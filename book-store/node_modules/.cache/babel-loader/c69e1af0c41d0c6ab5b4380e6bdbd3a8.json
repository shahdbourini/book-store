{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const getBooks = createAsyncThunk('book/getBooks', async (_, thunkAPI) => {\n  const {\n    rejectWithValue\n  } = thunkAPI;\n\n  try {\n    const res = await fetch('http://localhost:3005/books');\n    const data = await res.json();\n    return data;\n  } catch (err) {\n    return rejectWithValue(err.message);\n  }\n});\n/* insert book */\n\nexport const insertBook = createAsyncThunk('book/insertBook', async (book, thunkAPI) => {\n  const {\n    rejectWithValue\n  } = thunkAPI;\n\n  try {\n    const res = await fetch('http://localhost:3005/books', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n      },\n      body: JSON.stringify(book)\n    });\n    const data = await res.json();\n    return data;\n  } catch (err) {\n    return rejectWithValue(err.message);\n  }\n});\n/* delete book */\n\nexport const deleteBook = createAsyncThunk('book/deleteBook', async (id, thunkAPI) => {\n  const {\n    rejectWithValue\n  } = thunkAPI;\n\n  try {\n    const res = await fetch(`http://localhost:3005/books/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n      }\n    });\n    return id;\n  } catch (err) {\n    return rejectWithValue(err.message);\n  }\n});\nconst bookSlice = createSlice({\n  name: 'books',\n  initialState: {\n    books: [],\n    isLoading: false,\n    error: null,\n    info: []\n  },\n  reducers: {\n    readBook: (state, action) => {\n      state.info = state.books.filter(book => book.id === action.payload); // console.log(state.info);\n    }\n  },\n  extraReducers: {\n    [getBooks.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null; // console.log(action);\n    },\n    [getBooks.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books = action.payload; // console.log(action);\n    },\n    [getBooks.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n      console.log(action);\n    },\n\n    /*insert book */\n    [insertBook.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null;\n      console.log(action);\n    },\n    [insertBook.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books.push(action.payload);\n      console.log(action);\n    },\n    [insertBook.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n      console.log(action);\n    },\n\n    /* delete book */\n    [deleteBook.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null;\n    },\n    [deleteBook.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books = state.books.filter(book => {\n        return book.id !== action.payload;\n      });\n      state.books = state.books.filter(book => {\n        return book.id !== action.payload;\n      });\n    },\n    [deleteBook.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    }\n  }\n});\nexport const {\n  readBook\n} = bookSlice.actions;\nexport default bookSlice.reducer;","map":{"version":3,"sources":["D:/bookStore-redux/book-store/src/store/bookSlice.js"],"names":["createSlice","createAsyncThunk","getBooks","_","thunkAPI","rejectWithValue","res","fetch","data","json","err","message","insertBook","book","method","headers","body","JSON","stringify","deleteBook","id","bookSlice","name","initialState","books","isLoading","error","info","reducers","readBook","state","action","filter","payload","extraReducers","pending","fulfilled","rejected","console","log","push","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\nexport const getBooks = createAsyncThunk('book/getBooks', async (_, thunkAPI) => {\r\n  const { rejectWithValue } = thunkAPI\r\n  try {\r\n    const res = await fetch('http://localhost:3005/books');\r\n    const data = await res.json();\r\n    return data\r\n  }\r\n  catch (err) {\r\n    return rejectWithValue(err.message)\r\n\r\n  }\r\n});\r\n\r\n/* insert book */\r\nexport const insertBook = createAsyncThunk('book/insertBook', async (book, thunkAPI) => {\r\n  const { rejectWithValue } = thunkAPI\r\n  try {\r\n    const res = await fetch('http://localhost:3005/books', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json; charset=UTF-8',\r\n      },\r\n      body: JSON.stringify(book),\r\n    });\r\n    const data = await res.json();\r\n    return data\r\n  }\r\n  catch (err) {\r\n    return rejectWithValue(err.message);\r\n  }\r\n});\r\n\r\n/* delete book */\r\nexport const deleteBook = createAsyncThunk('book/deleteBook', async (id, thunkAPI) => {\r\n  const { rejectWithValue } = thunkAPI\r\n  try {\r\n    const res = await fetch(`http://localhost:3005/books/${id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json; charset=UTF-8',\r\n      },\r\n    });\r\n\r\n    return id\r\n  }\r\n  catch (err) {\r\n    return rejectWithValue(err.message);\r\n  }\r\n});\r\n\r\n\r\n\r\n\r\nconst bookSlice = createSlice({\r\n  name: 'books',\r\n  initialState: { books: [], isLoading: false, error: null, info: [] },\r\n\r\n  reducers: {\r\n    readBook: (state, action) => {\r\n      state.info = state.books.filter((book) => book.id === action.payload);\r\n      // console.log(state.info);\r\n    },\r\n  },\r\n\r\n  extraReducers: {\r\n    [getBooks.pending]: (state, action) => {\r\n      state.isLoading = true;\r\n      state.error = null;\r\n      // console.log(action);\r\n\r\n    },\r\n    [getBooks.fulfilled]: (state, action) => {\r\n      state.isLoading = false;\r\n      state.books = action.payload;\r\n      // console.log(action);\r\n    },\r\n    [getBooks.rejected]: (state, action) => {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n      console.log(action);\r\n    },\r\n\r\n    /*insert book */\r\n    [insertBook.pending]: (state, action) => {\r\n      state.isLoading = true;\r\n      state.error = null;\r\n      console.log(action);\r\n    },\r\n\r\n    [insertBook.fulfilled]: (state, action) => {\r\n      state.isLoading = false;\r\n      state.books.push(action.payload);\r\n      console.log(action);\r\n    },\r\n    [insertBook.rejected]: (state, action) => {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n      console.log(action);\r\n    },\r\n\r\n    /* delete book */\r\n    [deleteBook.pending]: (state, action) => {\r\n      state.isLoading = true;\r\n      state.error = null;\r\n    },\r\n\r\n    [deleteBook.fulfilled]: (state, action) => {\r\n      state.isLoading = false;\r\n      state.books = state.books.filter((book) => {\r\n        return book.id !== action.payload;\r\n      })\r\n      state.books = state.books.filter((book) => {\r\n        return book.id !== action.payload;\r\n      })\r\n    },\r\n\r\n    [deleteBook.rejected]: (state, action) => {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n\r\n    },\r\n  }\r\n});\r\n\r\n\r\nexport const { readBook } = bookSlice.actions;\r\n\r\nexport default bookSlice.reducer;"]},"metadata":{},"sourceType":"module"}