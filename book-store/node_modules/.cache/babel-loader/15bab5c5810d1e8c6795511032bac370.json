{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const getBooks = createAsyncThunk('book/getBooks', async (_, thunkAPI) => {\n  const {\n    rejectWithValue\n  } = thunkAPI;\n\n  try {\n    const res = await fetch('http://localhost:3005/books');\n    const data = await res.json();\n    return data;\n  } catch (err) {\n    return rejectWithValue(err.message);\n  }\n});\n/* insert book */\n\nexport const insertBook = createAsyncThunk('book/insertBook', async (book, thunkAPI) => {\n  const {\n    rejectWithValue\n  } = thunkAPI;\n\n  try {\n    const res = await fetch('http://localhost:3005/books', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(book)\n    });\n    const data = await res.json();\n    return data;\n  } catch (err) {\n    return rejectWithValue(err.message);\n  }\n});\nconst bookSlice = createSlice({\n  name: 'books',\n  initialState: {\n    books: [],\n    isLoading: false,\n    error: null\n  },\n  extraReducers: {\n    [getBooks.pending]: (state, action) => {\n      state.isLoading = true;\n      state.error = null;\n      console.log(action);\n    },\n    [getBooks.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.books = action.payload;\n      console.log(action);\n    },\n    [getBooks.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n      console.log(action);\n    }\n  }\n});\nexport default bookSlice.reducer;","map":{"version":3,"sources":["D:/bookStore-redux/book-store/src/store/bookSlice.js"],"names":["createSlice","createAsyncThunk","getBooks","_","thunkAPI","rejectWithValue","res","fetch","data","json","err","message","insertBook","book","method","headers","body","JSON","stringify","bookSlice","name","initialState","books","isLoading","error","extraReducers","pending","state","action","console","log","fulfilled","payload","rejected","reducer"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,gBAAtB,QAA8C,kBAA9C;AAEC,OAAO,MAAMC,QAAQ,GAAGD,gBAAgB,CAAC,eAAD,EAAkB,OAAOE,CAAP,EAAUC,QAAV,KAAuB;AAChF,QAAM;AAACC,IAAAA;AAAD,MAAoBD,QAA1B;;AACA,MAAG;AACD,UAAME,GAAG,GAAG,MAAMC,KAAK,CAAC,6BAAD,CAAvB;AACA,UAAMC,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AACA,WAAOD,IAAP;AACD,GAJD,CAKA,OAAME,GAAN,EAAU;AACR,WAAOL,eAAe,CAACK,GAAG,CAACC,OAAL,CAAtB;AAED;AACF,CAXwC,CAAjC;AAaN;;AACA,OAAO,MAAMC,UAAU,GAAGX,gBAAgB,CAAC,iBAAD,EAAoB,OAAOY,IAAP,EAAaT,QAAb,KAA0B;AACtF,QAAM;AAACC,IAAAA;AAAD,MAAoBD,QAA1B;;AACA,MAAG;AACD,UAAME,GAAG,GAAG,MAAMC,KAAK,CAAC,6BAAD,EAAgC;AACrDO,MAAAA,MAAM,EAAE,MAD6C;AAErDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAF4C;AAKrDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,IAAf;AAL+C,KAAhC,CAAvB;AAOA,UAAML,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AACA,WAAOD,IAAP;AACD,GAVD,CAWA,OAAME,GAAN,EAAU;AACR,WAAOL,eAAe,CAACK,GAAG,CAACC,OAAL,CAAtB;AACA;AACD,CAhBuC,CAAnC;AAmBT,MAAMQ,SAAS,GAAGnB,WAAW,CAAE;AAC3BoB,EAAAA,IAAI,EAAE,OADqB;AAE3BC,EAAAA,YAAY,EAAE;AAAEC,IAAAA,KAAK,EAAE,EAAT;AAAaC,IAAAA,SAAS,EAAE,KAAxB;AAA+BC,IAAAA,KAAK,EAAE;AAAtC,GAFa;AAI3BC,EAAAA,aAAa,EAAE;AACb,KAACvB,QAAQ,CAACwB,OAAV,GAAoB,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACrCD,MAAAA,KAAK,CAACJ,SAAN,GAAkB,IAAlB;AACAI,MAAAA,KAAK,CAACH,KAAN,GAAc,IAAd;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AAED,KANY;AAOb,KAAC1B,QAAQ,CAAC6B,SAAV,GAAsB,CAACJ,KAAD,EAAQC,MAAR,KAAmB;AACvCD,MAAAA,KAAK,CAACJ,SAAN,GAAkB,KAAlB;AACAI,MAAAA,KAAK,CAACL,KAAN,GAAcM,MAAM,CAACI,OAArB;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACH,KAXc;AAYf,KAAC1B,QAAQ,CAAC+B,QAAV,GAAoB,CAACN,KAAD,EAASC,MAAT,KAAmB;AACrCD,MAAAA,KAAK,CAACJ,SAAN,GAAkB,KAAlB;AACAI,MAAAA,KAAK,CAACH,KAAN,GAAcI,MAAM,CAACI,OAArB;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACD;AAhBc;AAJY,CAAF,CAA7B;AA6BA,eAAeT,SAAS,CAACe,OAAzB","sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\n export const getBooks = createAsyncThunk('book/getBooks', async (_, thunkAPI) => {\r\n  const {rejectWithValue} = thunkAPI\r\n  try{\r\n    const res = await fetch('http://localhost:3005/books');\r\n    const data = await res.json();\r\n    return data\r\n  } \r\n  catch(err){\r\n    return rejectWithValue(err.message)\r\n\r\n  }\r\n});\r\n\r\n  /* insert book */\r\n  export const insertBook = createAsyncThunk('book/insertBook', async (book, thunkAPI) => {\r\n    const {rejectWithValue} = thunkAPI\r\n    try{\r\n      const res = await fetch('http://localhost:3005/books', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(book),\r\n      });\r\n      const data = await res.json();\r\n      return data\r\n    } \r\n    catch(err){\r\n      return rejectWithValue(err.message); \r\n     }\r\n    });\r\n\r\n\r\nconst bookSlice = createSlice ({\r\n    name: 'books',\r\n    initialState: { books: [], isLoading: false, error: null },\r\n\r\n    extraReducers: {\r\n      [getBooks.pending]: (state, action) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n        console.log(action);\r\n\r\n      },\r\n      [getBooks.fulfilled]: (state, action) => { \r\n        state.isLoading = false;\r\n        state.books = action.payload;\r\n        console.log(action); \r\n    },\r\n    [getBooks.rejected]:(state , action) =>{\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n      console.log(action);\r\n    },\r\n  },\r\n\r\n  \r\n  });\r\n\r\n\r\n\r\n\r\nexport default bookSlice.reducer;"]},"metadata":{},"sourceType":"module"}